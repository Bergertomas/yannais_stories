#:kivy 2.0.0
#:import theme theme

<HomeScreen>:
    # We'll let the starfield be added programmatically to ensure it's the bottom-most element
    BoxLayout:
        orientation: 'vertical'
        padding: 20
        spacing: 15

        # Title section with "DreamTales"
        BoxLayout:
            orientation: 'vertical'
            size_hint_y: None
            height: dp(80)

            Label:
                text: "DreamTales"
                font_size: dp(34)
                bold: True
                size_hint_y: None
                height: dp(50)
                color: theme.GOLD_LIGHT

            Label:
                text: "Bedtime tales to whisk you away to dreamland"
                font_size: dp(14)
                size_hint_y: None
                height: dp(30)
                color: theme.SECONDARY_TEXT_COLOR

        # "Choose Your Story" title
        Label:
            text: "Choose Your Story"
            size_hint_y: None
            height: dp(50)
            font_size: dp(22)
            halign: 'center'

        # Story grid with calming, toddler-friendly colors
        GridLayout:
            id: story_grid
            cols: 2
            spacing: 15
            size_hint_y: 0.4

            # These are placeholder buttons that will be replaced dynamically
            Button:
                text: "tryout_1"
                background_color: theme.NAV_BLUE
                on_release: root.play_recording_by_title(self.text)
                canvas.before:
                    Color:
                        rgba: self.background_color
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [10]

            Button:
                text: "tryout"
                background_color: theme.NAV_GOLD
                on_release: root.play_recording_by_title(self.text)
                canvas.before:
                    Color:
                        rgba: self.background_color
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [10]

            Button:
                text: "tryout"
                background_color: theme.NAV_PURPLE
                on_release: root.play_recording_by_title(self.text)
                canvas.before:
                    Color:
                        rgba: self.background_color
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [10]

            Button:
                text: "All Recordings"
                background_color: theme.NAV_GREEN
                on_release: root.navigate_to('file_list')
                canvas.before:
                    Color:
                        rgba: self.background_color
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [10]

        # Small spacer
        BoxLayout:
            size_hint_y: 0.05

        # Navigation buttons section
        Label:
            text: "Navigate To"
            size_hint_y: None
            height: dp(30)
            font_size: dp(18)
            color: theme.SECONDARY_TEXT_COLOR

        GridLayout:
            cols: 2
            spacing: 15
            size_hint_y: 0.25

            Button:
                text: "All Recordings"
                background_color: theme.NAV_BLUE
                on_release: root.navigate_to('file_list')
                canvas.before:
                    Color:
                        rgba: self.background_color
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [10]

            Button:
                text: "Playlists"
                background_color: theme.NAV_GOLD
                on_release: root.navigate_to('playlist')
                canvas.before:
                    Color:
                        rgba: self.background_color
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [10]

            Button:
                text: "Import Audio"
                background_color: theme.NAV_GREEN
                on_release: root.navigate_to('import')
                canvas.before:
                    Color:
                        rgba: self.background_color
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [10]

            Button:
                text: "Settings"
                background_color: theme.NAV_PURPLE
                on_release: root.navigate_to('settings')
                canvas.before:
                    Color:
                        rgba: self.background_color
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [10]

        # Spacer before mini player
        BoxLayout:
            size_hint_y: 0.05
