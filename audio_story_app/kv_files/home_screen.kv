#:kivy 2.0.0
#:import theme theme

<HomeScreen>:
    BoxLayout:
        orientation: 'vertical'
        padding: dp(20)
        spacing: dp(15)

        # Title section with "DreamTales"
        BoxLayout:
            orientation: 'vertical'
            size_hint_y: None
            height: dp(80)

            Label:
                text: "DreamTales"
                font_size: dp(34)
                bold: True
                size_hint_y: None
                height: dp(50)
                color: theme.GOLD_LIGHT

            Label:
                text: "Bedtime tales to whisk you away to dreamland"
                font_size: dp(14)
                size_hint_y: None
                height: dp(30)
                color: theme.SECONDARY_TEXT_COLOR

        # Choose Your Story section
        Label:
            text: "Choose Your Story"
            size_hint_y: None
            height: dp(40)
            font_size: dp(22)
            halign: "center"

        # Story grid with cards
        GridLayout:
            id: story_grid
            cols: 2
            spacing: dp(15)
            size_hint_y: None
            height: dp(180)  # Smaller height to prevent overlap

            # These are placeholders that will be replaced dynamically
            Button:
                text: "tryout_1"
                background_color: theme.NAV_PURPLE
                on_release: root.play_recording_by_title(self.text)
                canvas.before:
                    Color:
                        rgba: self.background_color
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [15]

            Button:
                text: "tryout"
                background_color: theme.NAV_GOLD
                on_release: root.play_recording_by_title(self.text)
                canvas.before:
                    Color:
                        rgba: self.background_color
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [15]

            Button:
                text: "tryout"
                background_color: theme.NAV_GREEN
                on_release: root.play_recording_by_title(self.text)
                canvas.before:
                    Color:
                        rgba: self.background_color
                    RoundedRectangle:
                        pos: self.pos
                        size: self.size
                        radius: [15]

        # Navigation section with more padding at top
        BoxLayout:
            orientation: 'vertical'
            size_hint_y: None
            height: dp(240)
            padding: [0, dp(10), 0, 0]  # Added top padding

            Label:
                text: "Navigate To"
                size_hint_y: None
                height: dp(40)
                font_size: dp(18)
                halign: "center"

            # Navigation buttons
            GridLayout:
                cols: 2
                spacing: dp(15)
                size_hint_y: None
                height: dp(180)

                Button:
                    text: "All Recordings"
                    background_color: theme.NAV_BLUE
                    on_release: root.navigate_to('file_list')
                    canvas.before:
                        Color:
                            rgba: self.background_color
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [15]

                Button:
                    text: "Playlists"
                    background_color: theme.NAV_GOLD
                    on_release: root.navigate_to('playlist')
                    canvas.before:
                        Color:
                            rgba: self.background_color
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [15]

                Button:
                    text: "Import Audio"
                    background_color: theme.NAV_GREEN
                    on_release: root.navigate_to('import')
                    canvas.before:
                        Color:
                            rgba: self.background_color
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [15]

                Button:
                    text: "Settings"
                    background_color: theme.NAV_PURPLE
                    on_release: root.navigate_to('settings')
                    canvas.before:
                        Color:
                            rgba: self.background_color
                        RoundedRectangle:
                            pos: self.pos
                            size: self.size
                            radius: [15]

        # Larger spacer before mini player to prevent overlap
        Widget:
            size_hint_y: 0.25
